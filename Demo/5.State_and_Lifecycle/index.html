<!DOCTYPE html>
<html>
    <head>
        <title>React - Props</title>
        <script src="https://unpkg.com/react@16.7.0/umd/react.development.js"></script>
        <script src="https://unpkg.com/react-dom@16.7.0/umd/react-dom.development.js"></script>
        <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
        <script src="../js/react.min.js"></script>
        <script src="../js/react-dom.min.js"></script>
        <script src="../js/browser.min.js"></script>
    </head>
    <body>
        <div id="root">
            <!-- This element's contents will be replaced with your component. -->
        </div>

        <script type="text/babel">
        /* 
            State is similar to props, but it is private and fully controlled by the component.

            **** Adding Local State to a Class
            1. Replace this.props.date with this.state.date in the render() method:
            2. Add a class constructor that assigns the initial this.state:
            3. Remove the date prop from the <Clock /> element:
        */
            // Converted the following Clock function into Clock Class as below 
            /* 
            function Clock(props) {
                return (
                    <div>
                        <h1>Hello, world!</h1>
                        <h2>It is {props.date.toLocaleTimeString()}.</h2>
                    </div>
                );                
            }*/

            class Clock extends React.Component{
                constructor(props){
                    super(props);
                    this.state = {date: new Date()};
                }

                componentDidMount() {
                    this.timerID = setInterval(
                        () => this.tick(), 
                        1000
                    );
                }

                componentWillUnmount() {  
                    clearInterval(this.timerID);
                }

                /* We implement a method called tick() that the Clock component will run every second.
                    It will use this.setState() to schedule updates to the component local state:
                */
                tick() {    
                    this.setState({      
                        date: new Date()    
                    });  
                }

                render(){
                    return(
                        <div>
                            <h1>Hello, world!</h1>
                            <h2>It is {this.state.date.toLocaleTimeString()}.</h2>
                        </div>
                    );
                }
            }

            function App() {
                return (
                    <div>
                        <Clock />  
                        <Clock /> 
                        <Clock />
                    </div>
                );
            }

            ReactDOM.render(
                //<Clock />,
                <App />,
                document.getElementById('root')
            );            

        </script>
         
    </body>
</html>